{% extends 'base.html' %}
{% block title %}
{{ title }}
{% endblock title %}


{% block main %}
<center><h1 style="margin-top: 50px;">Адмін панель</h1></center>
<ul class="list-group">
  <li class="list-group-item"><a href="{{ url_for('manage_services') }}" class="btn btn-primary btn-sm">Керування послугами</a></li>
  <li class="list-group-item"><a href="{{ url_for('users') }}" class="btn btn-primary btn-sm">Користувачі</a></li>
  <li class="list-group-item"><a href="{{ url_for('add_admin') }}" class="btn btn-primary btn-sm">Додати адміна</a></li>
</ul>




{% if show == "додати адміна" %}
<div class="mt-3" style="max-width: 400px; margin: 0 auto;">
  <h3>Додати адміна</h3>
  <form method="POST" action="{{ url_for('add_admin') }}">
    {{ form.hidden_tag() }}
    <div class="form-group">
      <label for="username">Ім'я користувача:</label>
      {{ form.username(class="form-control", id="username") }}
    </div>
    <button type="submit" class="btn btn-primary" style="margin-top: 20px;">Зробити адміном</button>
  </form>
</div>
{% endif %}




{% if show == "керування послугами" %}
<div class="mt-3">
  <h3>Керування послугами</h3>
  <div class="list-group">
    {% for service in services %}
      <div class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ service.service_name }}</strong>
          <br>
          <small class="text-muted">Ціна: {{ service.price }} грн | Переглядів: {{ service.views }}</small>
        </div>
        <div>
          <a href="{{ url_for('service', service_id=service.id) }}" class="btn btn-info btn-sm">Переглянути</a>
          <a href="{{ url_for('admin_delete_service', service_id=service.id) }}" class="btn btn-danger btn-sm" onclick="return confirm('Ви впевнені, що хочете видалити цю послугу?')">Видалити</a>
        </div>
      </div>
    {% else %}
      <div class="list-group-item">
        <em>Немає доступних послуг</em>
      </div>
    {% endfor %}
  </div>
</div>
{% endif %}



{%if show == "користувачі" %}
  <div class="mt-3"> 
    <h3>Користувачі</h3>
      <div class="list-group">
        <strong>Усього користувачів: {{user_count}}</strong>
        {%for user in users%}
          <div class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <strong>{{user.username}}</strong>
              <br>
              <small class="text-muted">{{user.last_name}} {{user.first_name}}</small>
            </div>
            <div>
              <a href="{{ url_for('delete_user', user_id=user.id) }}" class="btn btn-danger btn-sm" onclick="return confirm('Ви впевнені, що хочете видалити цього користувача?')">Видалити</a>
            </div>
          </div>
        {%endfor%}
      </div>
  </div>
{% endif %}



{% endblock main %}